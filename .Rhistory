devtools::check()
getwd()
devtools::load_all("/home/jovyan/DSQC")
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::document()
devtools::document()
devtools::check()
devtools::document()
devtools::document()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::load_all("/home/jovyan/DSQC")
path_to_dic <- "~/ds-dictionaries/dictionaries"
source("login.R")
setwd("../qc-study")
devtools::load_all("/home/jovyan/DSQC")
path_to_dic <- "~/ds-dictionaries/dictionaries"
source("login.R")
source("r/assign.R")
devtools::load_all("/home/jovyan/DSQC")
path_to_dic <- "~/ds-dictionaries/dictionaries"
source("login.R")
source("r/assign.R")
coh_dics_available <- identify_cohort_dics(path_to_dic, conns)
all_dics <- list_all_dic_files(path_to_dic)
dic_available <- format_dictionary_info(coh_dics_available, all_dics)
coh_dics_available
all_dics
dic_available
demographics <- .get_demographics(
available_dics = available_dics,
core_df = "core_non_rep",
yearly_df = "core_yearly_rep",
core_vars = c("agebirth_m_y", "ethn3_m", "sex"),
edu_var = "edu_m_",
repeated_dfs <- c("chemicals_ath_yearly_rep", "core_yearly_rep", "outcome_yearly_rep",
"outcome_ath_yearly_rep", "urban_ath_yearly_rep")
)
datashield.errors()
demographics <- .get_demographics(
available_dics = available_dics,
core_df = "core_non_rep",
yearly_df = "core_yearly_rep",
core_vars = c("agebirth_m_y", "ethn3_m", "sex"),
edu_var = "edu_m_",
repeated_dfs <- c("chemicals_ath_yearly_rep", "core_yearly_rep", "outcome_yearly_rep",
"outcome_ath_yearly_rep", "urban_ath_yearly_rep")
)
available_dics
devtools::load_all("/home/jovyan/DSQC")
demographics <- .get_demographics(
available_dics = available_dics,
core_df = "core_non_rep",
yearly_df = "core_yearly_rep",
core_vars = c("agebirth_m_y", "ethn3_m", "sex"),
edu_var = "edu_m_",
repeated_dfs <- c("chemicals_ath_yearly_rep", "core_yearly_rep", "outcome_yearly_rep",
"outcome_ath_yearly_rep", "urban_ath_yearly_rep")
)
non_rep_stats <- .get_stats_where_available(
available_dics = available_dics,
filter_var = core_df,
df = core_df,
vars = core_vars)
devtools::load_all("/home/jovyan/DSQC")
devtools::load_all("/home/jovyan/DSQC")
demographics <- .get_demographics(
available_dics = available_dics,
core_df = "core_non_rep",
yearly_df = "core_yearly_rep",
core_vars = c("agebirth_m_y", "ethn3_m", "sex"),
edu_var = "edu_m_",
repeated_dfs <- c("chemicals_ath_yearly_rep", "core_yearly_rep", "outcome_yearly_rep",
"outcome_ath_yearly_rep", "urban_ath_yearly_rep")
)
available_dics
df
vars
available_dics %>%
dplyr::filter(long_name == filter_var) %>%
pull(cohort)
ds.colnames("core_non_rep")
ds.summary("core_non_rep$agebirth_m_y")
ds.summary("core_non_rep$sex")
install.packages("arrow")
library(arrow)
coh_dics_available <- identify_cohort_dics(path_to_dic, conns)
all_dics <- list_all_dic_files(path_to_dic)
dic_available <- format_dictionary_info(coh_dics_available, all_dics)
demographics <- .get_demographics(
available_dics = coh_dics_available,
core_df = "core_non_rep",
yearly_df = "core_yearly_rep",
core_vars = c("agebirth_m_y", "ethn3_m", "sex"),
edu_var = "edu_m_",
repeated_dfs <- c("chemicals_ath_yearly_rep", "core_yearly_rep", "outcome_yearly_rep",
"outcome_ath_yearly_rep", "urban_ath_yearly_rep")
)
label_ref <- tibble(
variable = c("agebirth_m_y", "ethn3_m", "sex", "min_age", "max_age", "edu_m_.0_1"),
var_label = c("Maternal age", "Maternal ethnicity", "Child sex",
"Youngest child age", "Oldest child age", "Maternal education")
)
cat_ref <- tibble(
variable = c(
rep("ethn3_m", 3), rep("sex", 2), rep("edu_m_.0_1", 3)),
category = c(1, 2, 3, 1, 2, 1, 2, 3),
cat_label = c("White Western", "Mixed", "Other", "Male", "Female", "High", "Medium", "Low"))
source("~/DSQC/R/demographics.R", echo=TRUE)
devtools::load_all("/home/jovyan/DSQC")
coh_dics_available <- identify_cohort_dics(path_to_dic, conns)
all_dics <- list_all_dic_files(path_to_dic)
dic_available <- format_dictionary_info(coh_dics_available, all_dics)
demographics <- .get_demographics(
available_dics = coh_dics_available,
core_df = "core_non_rep",
yearly_df = "core_yearly_rep",
core_vars = c("agebirth_m_y", "ethn3_m", "sex"),
edu_var = "edu_m_",
repeated_dfs <- c("chemicals_ath_yearly_rep", "core_yearly_rep", "outcome_yearly_rep",
"outcome_ath_yearly_rep", "urban_ath_yearly_rep")
)
source("~/DSQC/R/demographics.R", echo=TRUE)
devtools::load_all("/home/jovyan/DSQC")
demographics <- .get_demographics(
available_dics = coh_dics_available,
core_df = "core_non_rep",
yearly_df = "core_yearly_rep",
core_vars = c("agebirth_m_y", "ethn3_m", "sex"),
edu_var = "edu_m_",
repeated_dfs <- c("chemicals_ath_yearly_rep", "core_yearly_rep", "outcome_yearly_rep",
"outcome_ath_yearly_rep", "urban_ath_yearly_rep")
)
demographics <- .get_demographics(
available_dics = coh_dics_available,
core_df = "core_non_rep",
yearly_df = "core_yearly_rep",
core_vars = c("agebirth_m_y", "ethn3_m", "sex"),
edu_var = "edu_m_",
repeated_dfs <- c("chemicals_ath_yearly_rep", "core_yearly_rep", "outcome_yearly_rep",
"outcome_ath_yearly_rep", "urban_ath_yearly_rep"),
conns = conns
)
source("~/DSQC/R/demographics.R", echo=TRUE)
devtools::load_all("/home/jovyan/DSQC")
demographics <- .get_demographics(
available_dics = coh_dics_available,
core_df = "core_non_rep",
yearly_df = "core_yearly_rep",
core_vars = c("agebirth_m_y", "ethn3_m", "sex"),
edu_var = "edu_m_",
repeated_dfs <- c("chemicals_ath_yearly_rep", "core_yearly_rep", "outcome_yearly_rep",
"outcome_ath_yearly_rep", "urban_ath_yearly_rep"),
conns = conns
)
label_ref <- tibble(
variable = c("agebirth_m_y", "ethn3_m", "sex", "min_age", "max_age", "edu_m_.0_1"),
var_label = c("Maternal age", "Maternal ethnicity", "Child sex",
"Youngest child age", "Oldest child age", "Maternal education")
)
cat_ref <- tibble(
variable = c(
rep("ethn3_m", 3), rep("sex", 2), rep("edu_m_.0_1", 3)),
category = c(1, 2, 3, 1, 2, 1, 2, 3),
cat_label = c("White Western", "Mixed", "Other", "Male", "Female", "High", "Medium", "Low"))
variable_summary <- .summarise_variables(coh_dics_available, "core_non_rep")
source("~/DSQC/R/variables.R", echo=TRUE)
devtools::load_all("/home/jovyan/DSQC")
path_to_dic <- "~/ds-dictionaries/dictionaries"
source("login.R")
source("r/assign.R")
variable_summary <- summarise_variables(coh_dics_available, "core_non_rep")
source("~/DSQC/R/variables.R", echo=TRUE)
devtools::load_all("/home/jovyan/DSQC")
variable_summary <- summarise_variables(coh_dics_available, "core_non_rep", conns)
source("~/DSQC/R/variables.R", echo=TRUE)
devtools::load_all("/home/jovyan/DSQC")
variable_summary <- summarise_variables(coh_dics_available, "core_non_rep", conns)
?pivot_longer
source("~/DSQC/R/variables.R", echo=TRUE)
devtools::check()
getwd()
devtools::check("../DSQC")
devtools::load_all("/home/jovyan/DSQC")
variable_summary <- summarise_variables(coh_dics_available, "core_non_rep", conns)
source("~/DSQC/R/variables.R", echo=TRUE)
devtools::load_all("/home/jovyan/DSQC")
variable_summary <- summarise_variables(coh_dics_available, "core_non_rep", conns)
variable_summary
dic_available %>%
kbl() %>%
kable_styling(bootstrap_options = c("striped", "hover")) %>%
collapse_rows(columns = 1, valign = "top")
library(dplyr)
library(kableExtra)
knitr::opts_chunk$set(echo = TRUE)
dic_available %>%
kbl() %>%
kable_styling(bootstrap_options = c("striped", "hover")) %>%
collapse_rows(columns = 1, valign = "top")
demo_neat <- dh.createTableOne(
stats = demographics,
type = "cohort",
vars = c("agebirth_m_y", "ethn3_m", "sex", "min_age", "max_age", "edu_m_.0_1"),
inc_missing = F,
perc_denom = "total",
var_labs = label_ref)
library(dsHelper)
dic_available %>%
kbl() %>%
kable_styling(bootstrap_options = c("striped", "hover")) %>%
collapse_rows(columns = 1, valign = "top")
demo_neat <- dh.createTableOne(
stats = demographics,
type = "cohort",
vars = c("agebirth_m_y", "ethn3_m", "sex", "min_age", "max_age", "edu_m_.0_1"),
inc_missing = F,
perc_denom = "total",
var_labs = label_ref)
demo_neat %>%
kbl() %>%
kable_styling(bootstrap_options = c("striped", "hover")) %>%
collapse_rows(columns = 1, valign = "top")
variable_summary %>%
kbl() %>%
kable_styling(bootstrap_options = c("striped", "hover"))
devtools::check()
devtools::check()
devtools::check()
devtools::check()
styler::style_pkg()
install.packages("styler")
library(styler)
styler::style_pkg()
devtools::load_all("/home/jovyan/molgenis-r-qc")
path_to_dic <- "~/ds-dictionaries/dictionaries"
coh_dics_available <- identify_cohort_dics(path_to_dic, conns)
source("login.R")
